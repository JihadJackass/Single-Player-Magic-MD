scripted_gui = {

	cpt_main_container = {
	
		context_type = selected_country_context
		
		window_name = "cpt_main_container"
		
		visible = {
			ROOT = {
				is_ai = no
				has_global_flag = cpt_enabled
				OR = {
					has_country_flag = tp_is_host
					NOT = {
						has_global_flag = tp_is_multiplayer
					}
				}
			}
		}

		triggers = {
			cpt_marker_visible   = { NOT = { has_country_flag = cpt_puppetee } }
			cpt_unmarker_visible = { has_country_flag = cpt_puppetee }
		}
		
		effects = {

			cpt_marker_click = {
				set_country_flag = cpt_puppetee
			}
			cpt_unmarker_click = {
				clr_country_flag = cpt_puppetee
			}
			cpt_unmark_all_click = {
				every_country = {
					limit = { has_country_flag = cpt_puppetee }
					clr_country_flag = cpt_puppetee
				}
			}
			cpt_help_button_click = {
				ROOT = { country_event = toolpack.1 }
			}
			cpt_autonomy_add_1_click = {
				add_autonomy_score = {
					value = 1
					localization = Toolpack
				}
			}
			cpt_autonomy_add_10_click = {
				add_autonomy_score = {
					value = 10
					localization = Toolpack
				}
			}
			cpt_autonomy_add_50_click = {
				add_autonomy_score = {
					value = 50
					localization = Toolpack
				}
			}
			cpt_autonomy_add_500_click = {
				add_autonomy_score = {
					value = 500
					localization = Toolpack
				}
			}
			cpt_autonomy_sub_1_click = {
				add_autonomy_score = {
					value = -1
					localization = Toolpack
				}
			}
			cpt_autonomy_sub_10_click = {
				add_autonomy_score = {
					value = -10
					localization = Toolpack
				}
			}
			cpt_autonomy_sub_50_click = {
				add_autonomy_score = {
					value = -50
					localization = Toolpack
				}
			}
			cpt_autonomy_sub_500_click = {
				add_autonomy_score = {
					value = -500
					localization = Toolpack
				}
			}
			# - Free
			# - Associated State - autonomy_associated_state
			# - Puppet State - autonomy_puppet_state
			# - Autonomous State - autonomy_autonomous_state
			# - Satellite State - autonomy_satellite_state (integrated puppet)
			# - Collaboration Government - autonomy_collaboration_government
			# LOWEST AUTONOMY - FREE
			cpt_autonomy_free_click = {
				if = {
					limit = {
						NOT = {
							any_country = { has_country_flag = cpt_puppetee }
						}
					}
					OVERLORD = {
						set_autonomy = {
							target = PREV
							autonomy_state = autonomy_free
						}
					}
				}
				set_temp_variable = { puppeteer = this }
				every_country = {
					limit = { has_country_flag = cpt_puppetee }
					var:puppeteer = {
						set_autonomy = {
							target = PREV
							autonomy_state = autonomy_free
						}
					}
					clr_country_flag = cpt_puppetee
				}
				bst_count_civf = yes
			}
			#
			cpt_autonomy_puppet_click = {
				set_temp_variable = { puppeteer = this }
				every_country = {
					limit = { has_country_flag = cpt_puppetee }
					var:puppeteer = {
						puppet = PREV
						set_autonomy = {
							target = PREV
							autonomy_state = autonomy_puppet_state
						}
					}
					clr_country_flag = cpt_puppetee
				}
				bst_count_civf = yes
			}
			# 
			cpt_autonomy_integrated_puppet_click = {
				set_temp_variable = { puppeteer = this }
				every_country = {
					limit = { has_country_flag = cpt_puppetee }
					var:puppeteer = {
						puppet = PREV
						set_autonomy = {
							target = PREV
							autonomy_state = autonomy_integrated_puppet
						}
					}
					clr_country_flag = cpt_puppetee
				}
				bst_count_civf = yes
			}
		}
	}
}